# APIs

APIs is a set of customizable utilities to send and fetch data. `APIs` takes two arguments, `domain name` which is compulsory and `application headers` which is optional. 

### Setup APIs utility

import { Steps } from 'nextra/components'

<Steps>
### Create `apiSetup.js`

If you scaffold your application with `create-render-app`, `apiSetup.js` file is located in utilities folder. If you're using a `script` tag, you need to create `apiSetup.js` file in your project and add the code from [apiSetup.js](https://github.com/codingnninja/create-render-app/tree/main/src/utils/apis.js) to it.

### Set default domain to send or fetch data

In the code you copied from `apiSetup.js`, add your default domain name.

```js copy
export function APIs(baseUrl, headers){
  const __baseUrl = baseUrl || 'https://jsonplaceholder.typicode.com';
  // The rest of the code
}
```

### Set default application headers

Add your default application headers to the object.

```js copy
export function APIs(baseUrl, headers){
  //const __baseUrl = baseUrl || 'https://your-default-domain.com';
  const __headers = headers || {
    'Content-Type': 'application/json'};
  // The rest of the code
}
```

### Use APIs.

import { Tabs } from 'nextra/components'

<Tabs items={['cdn', 'module']}>
  <Tabs.Tab> 
    * Add `apiSetup.js` to the `HTML` page where you want to fetch and send data.

    ```html copy
    <!doctype html>
    <html>
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
      </head>
      <body>
        <div id="root"></div>

        <script src="https://cdn.jsdelivr.net/npm/@codingnninja/render/dist/umd/bundle.min.js"></script>
        <script src="apiSetup.js"></script>
      </body>
    </html>
    ```

    * Use APIs with default domain and headers

    ```js filename="appFunctions.js" copy
        const response = await APIs().get("todos");
        const todos = await response.json();
        console.log(todos)
        // posting todo
        APIs.post('posts', todo); 
    ```

    * Use APIs by overrinding default domain and HTTP headers

    ```js filename="appFunctions.js" copy
        const baseUrl = "https://randomuser.me";

        const headers = {
            'Content-Type': 'application/json'
            Cache-Control: max-age=0
        }

        const rando = await APIs(baseUrl, headers).get("api/?results=30");
        const users = rando.json();
    ```

     * Fetch data from multiple servers
    ```js filename="appFunctions.js" copy
      const rando = "https://randomuser.me";

      const typicode = APIs();
      const rando = APIs(rando);

      // Fetch from typicode
      const typicodeTodosResponse = await typicode.get('todos');
      const todos = await typicodeResponse.json();

      const typicodeTodoResponse = await typicode.get('todos/1');
      const todo = await typicodeTodoResponse.json();

      // Fetch from ramdo
      const randoUsersResponse = await rando.get('feeds');
      const users = await randoUsersResponse.json();
    ```
  </Tabs.Tab> 
  <Tabs.Tab> 

    ```js filename="App.js" copy
      import {APIs} from './apiSetup'
    ```

       * Use APIs with default domain and headers

    ```js filename="appFunctions.js" copy
        const response = await APIs().get("todos");
        const todos = await response.json();
        console.log(todos)
        // posting todo
        APIs.post('posts', todo); 
    ```

    * Use APIs by overrinding default domain and HTTP headers

    ```js filename="appFunctions.js" copy
        const baseUrl = "https://randomuser.me";

        const headers = {
            'Content-Type': 'application/json'
            Cache-Control: max-age=0
        }

        const rando = await APIs(baseUrl, headers).get("api/?results=30");
        const users = rando.json();
      }
    ```

    * Fetch data from multiple servers
    ```js filename="appFunctions.js" copy
      const rando = "https://randomuser.me";

      const typicode = APIs();
      const rando = APIs(rando);

      // Fetch from typicode
      const typicodeTodosResponse = await typicode.get('todos');
      const todos = await typicodeResponse.json();

      const typicodeTodoResponse = await typicode.get('todos/1');
      const todo = await typicodeTodoResponse.json();

      // Fetch from ramdo
      const randoUsersResponse = await rando.get('feeds');
      const users = await randoUsersResponse.json();
    ```
  </Tabs.Tab> 
</Tabs>

Now, you can use `APIs` anywhere in your project to fetch and post data.
</Steps>

* Playground 

Multiple server requests in action.

<iframe src="https://codesandbox.io/embed/t74tcw?view=Editor+%2B+Preview&module=%2Findex.html"
     width="100%" 
     height="500px"
     title="user-list"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>

[Click to check]() the common errors in using `APIs`.